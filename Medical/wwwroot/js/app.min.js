
$(function () {
  // Admin Panel settings

  //****************************
  /* This is for the mini-sidebar if width is less then 1170*/
  //****************************
  var setsidebartype = function () {
    var width =
      window.innerWidth > 0 ? window.innerWidth : this.screen.width;
    if (width < 1199) {
      $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
      $("#main-wrapper").addClass("mini-sidebar");
    } else {
      $("#main-wrapper").attr("data-sidebartype", "full");
      $("#main-wrapper").removeClass("mini-sidebar");
    }
  };
  $(window).ready(setsidebartype);
  $(window).on("resize", setsidebartype);
  //****************************
  /* This is for sidebartoggler*/
  //****************************
  $(".sidebartoggler").on("click", function () {
    $("#main-wrapper").toggleClass("mini-sidebar");
    if ($("#main-wrapper").hasClass("mini-sidebar")) {
      $(".sidebartoggler").prop("checked", !0);
      $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
    } else {
      $(".sidebartoggler").prop("checked", !1);
      $("#main-wrapper").attr("data-sidebartype", "full");
    }
  });
  $(".sidebartoggler").on("click", function () {
    $("#main-wrapper").toggleClass("show-sidebar");
  });

  $('.dropdown-menu .dropdown-item').on('click', function (event) {
    const Search = DocumentSettings.lang === "en-US" ? "Search With" : "البحث عن طريق";

    // Remove active class from all other buttons
    $('.dropdown-menu .dropdown-item').removeClass('active');

    // Add active class to the clicked button
    $(this).addClass('active');

    var buttonText = $(this).text().trim(); // Get the text of the clicked button
    var selectedValue = buttonText; // Assign the text to selectedValue
    // console.log("Selected Value: " + selectedValue);
    // You can perform further actions based on the selected value here
    // For example, you can update another element on the page
    $("#search-with").text(`${Search} - ${selectedValue}`);
  });

  // Forget Password Reset Button
  $("#reset-btn").on("click", function () {
    const swalWithBootstrapButtons = Swal.mixin({
      customClass: {
        confirmButton: "btn btn-success ms-2",
      },
      buttonsStyling: false
    });

    swalWithBootstrapButtons.fire({
      title: "Good job!",
      text: "We Send Temporary Password in your email!",
      icon: "success"
    }).then((result) => {
      if (result.isConfirmed) {
        window.location.href = "./authentication-login.html"; // Redirect to login page
      }
    });
  });
  // Forget Password Reset Button


  $(`[data-translate="Delete"]`).on("click", function () {
    // const textContent = $(this).parent().siblings().first().children().first().text(); // 
    // Get the appropriate translations based on the current language

    const swalWithBootstrapButtons = Swal.mixin({
      customClass: {
        confirmButton: "btn btn-success ms-2",
        cancelButton: "btn btn-danger"
      },
      buttonsStyling: false
    });

    // English Translations
    const englishTranslations = {
      areYouSure: "Are you sure?",
      cannotRevert: "You won't be able to revert this!",
      confirmButtonText: "Yes, delete it!",
      cancelButtonText: "No, cancel!",
      deletedTitle: "Deleted!",
      deletedText: "This User Has Been Deleted.",
      cancelledTitle: "Cancelled",
      cancelledText: "Deleting User Cancelled",
    };

    // Arabic Translations
    const arabicTranslations = {
      areYouSure: "هل أنت متأكد؟",
      cannotRevert: "لن تتمكن من التراجع عن هذا!",
      confirmButtonText: "نعم، احذفها!",
      cancelButtonText: "لا، ألغِ",
      deletedTitle: "تم الحذف!",
      deletedText: "تم حذف هذا المستخدم.",
      cancelledTitle: "تم الإلغاء",
      cancelledText: "تم الغاء حذف المستخدم :)",
    };

    const translations = document.documentElement.lang === "ar-EG" ? arabicTranslations : englishTranslations;

    swalWithBootstrapButtons.fire({
      title: translations.areYouSure,
      text: translations.cannotRevert,
      icon: "warning",
      showCancelButton: true,
      confirmButtonText: translations.confirmButtonText,
      cancelButtonText: translations.cancelButtonText,
      reverseButtons: true
    }).then((result) => {
      if (result.isConfirmed) {
        swalWithBootstrapButtons.fire({
          title: translations.deletedTitle,
          text: translations.deletedText,
          icon: "success"
        })
          .then(r => {
            const id = $(this).closest('tr').find('td:first-child h6').text().trim();
    
            // Log the retrieved ID for debugging
            console.log("Retrieved ID:", id);
            
            // window.location.href = `/deleteUser/${id}`;
          });

      } else if (result.dismiss === Swal.DismissReason.cancel) {
        swalWithBootstrapButtons.fire({
          title: translations.cancelledTitle,
          text: translations.cancelledText,
          icon: "error"
        });
      }
    });
  })
})